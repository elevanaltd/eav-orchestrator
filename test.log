
> build@1.0.0 test
> vitest run --exclude '**/**.feature.test.**'


 RUN  v3.2.4 /Volumes/HestAI-Projects/eav-orchestrator/build

 ✓ tests/repomix-ignore.test.ts (4 tests) 9ms
stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should initialize IndexedDB with correct schema
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/monitoring/sentry.test.ts > Sentry Error Monitoring Integration > should initialize Sentry with correct configuration
Sentry initialized for test environment

stdout | tests/unit/monitoring/sentry.test.ts > Sentry Error Monitoring Integration > should configure performance monitoring with browser tracing
Sentry initialized for test environment

stdout | tests/unit/monitoring/sentry.test.ts > Sentry Error Monitoring Integration > should handle missing DSN gracefully
Sentry DSN not configured. Skipping Sentry initialization.

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should enqueue operations to IndexedDB
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should dequeue operations in FIFO order
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ✓ tests/unit/monitoring/sentry.test.ts (7 tests) 25ms
stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should peek at next operation without removing it
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should handle empty queue operations gracefully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should clear all operations from queue
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ✓ tests/unit/ordering/fractionalIndex.test.ts (29 tests) 12ms
stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should fallback to localStorage when IndexedDB unavailable
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB not supported
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:131:16
    at new Promise (<anonymous>)
    at IndexedDBQueue.initializeIndexedDB [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:128:12[90m)[39m
    at IndexedDBQueue.initialize [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:97:18[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:179:19
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should fallback to memory when both IndexedDB and localStorage fail
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB not supported
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:131:16
    at new Promise (<anonymous>)
    at IndexedDBQueue.initializeIndexedDB [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:128:12[90m)[39m
    at IndexedDBQueue.initialize [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:97:18[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:195:19
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
localStorage initialization failed, falling back to memory: Error: localStorage not available
    at IndexedDBQueue.initializeLocalStorage [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:233:13[90m)[39m
    at IndexedDBQueue.initialize [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:108:14[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:195:7
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should migrate data from localStorage to IndexedDB
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should migrate data from localStorage to IndexedDB
Migrating 1 operations from localStorage to IndexedDB

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should migrate data from localStorage to IndexedDB
Migration complete, localStorage cleared

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should handle migration of corrupted localStorage data gracefully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should handle migration of corrupted localStorage data gracefully
Migration from localStorage failed: SyntaxError: Unexpected token 'i', "invalid-json-data" is not valid JSON
    at JSON.parse (<anonymous>)
    at IndexedDBQueue.migrateFromLocalStorage [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:265:32[90m)[39m
    at IndexedDBQueue.initialize [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:102:18[90m)[39m
[90m    at runNextTicks (node:internal/process/task_queues:65:5)[39m
[90m    at processImmediate (node:internal/timers:453:9)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:233:7
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should handle IndexedDB quota exceeded gracefully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should handle IndexedDB quota exceeded gracefully
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB open failed: undefined
    at Object.request.onerror [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:144:16[90m)[39m
    at Timeout._onTimeout [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:255:21[90m)[39m
[90m    at listOnTimeout (node:internal/timers:588:17)[39m
[90m    at processTimers (node:internal/timers:523:7)[39m

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should handle database corruption gracefully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should handle database corruption gracefully
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB open failed: undefined
    at Object.request.onerror [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:144:16[90m)[39m
    at Timeout._onTimeout [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:290:21[90m)[39m
[90m    at listOnTimeout (node:internal/timers:588:17)[39m
[90m    at processTimers (node:internal/timers:523:7)[39m

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should connect within performance targets
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should connect within performance targets
Document test-doc-123 does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should connect within performance targets
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should connect within performance targets
CustomSupabaseProvider connected in 3.51ms

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should maintain atomicity during operations
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ❯ tests/unit/database/scriptComponentManager.test.ts (12 tests | 1 failed) 8ms
   ✓ ScriptComponentManager > Single Component Updates with Optimistic Locking > should update component successfully when version matches 1ms
   ✓ ScriptComponentManager > Single Component Updates with Optimistic Locking > should throw OptimisticLockError when version conflict detected 1ms
   ✓ ScriptComponentManager > Single Component Updates with Optimistic Locking > should handle component not found error 0ms
   ✓ ScriptComponentManager > Batch Updates with Transaction Semantics > should update multiple components successfully 0ms
   ✓ ScriptComponentManager > Batch Updates with Transaction Semantics > should rollback entire batch on first conflict 0ms
   ✓ ScriptComponentManager > Version Management > should get current component version 0ms
   ✓ ScriptComponentManager > Version Management > should return 0 for non-existent component version 0ms
   ✓ ScriptComponentManager > Performance Metrics > should track operation latency 1ms
   ✓ ScriptComponentManager > Performance Metrics > should track conflict metrics 0ms
   ✓ ScriptComponentManager > Performance Metrics > should meet P95 latency target of 500ms 0ms
   ✓ ScriptComponentManager > Error Handling > should handle database errors gracefully 0ms
   × ScriptComponentManager > Error Handling > should validate input parameters 3ms
     → Cannot read properties of null (reading '0')
 ❯ src/lib/supabase.test.ts (18 tests | 1 failed | 3 skipped) 11ms
   × Supabase Client Configuration > Client Initialization > should create Supabase client with correct configuration from environment variables 6ms
     → expected "spy" to be called with arguments: [ 'https://test.supabase.co', …(2) ][90m

Received: 

[1m  1st spy call:

[22m[2m  [[22m
[2m    "https://test.supabase.co",[22m
[32m-   "test-anon-key-for-integration-tests",[90m
[32m-   ObjectContaining {[90m
[32m-     "auth": ObjectContaining {[90m
[31m+   "test-publishable-key-for-integration-tests",[90m
[31m+   {[90m
[31m+     "auth": {[90m
[2m        "autoRefreshToken": true,[22m
[2m        "detectSessionInUrl": true,[22m
[2m        "persistSession": true,[22m
[2m        "storageKey": "eav-orchestrator-auth",[22m
[2m      },[22m
[32m-     "realtime": ObjectContaining {[90m
[32m-       "params": ObjectContaining {[90m
[31m+     "realtime": {[90m
[31m+       "params": {[90m
[2m          "eventsPerSecond": 10,[22m
[2m        },[22m
[2m      },[22m
[2m    },[22m
[2m  ][22m
[39m[90m

Number of calls: [1m1[22m
[39m
   ↓ Supabase Client Configuration > Client Initialization > should return null if environment variables are missing
   ↓ Supabase Client Configuration > Client Initialization > should cache initialization errors
   ✓ Supabase Client Configuration > Authentication Functions > signIn > should sign in user with email and password 1ms
   ✓ Supabase Client Configuration > Authentication Functions > signIn > should throw error on sign in failure 1ms
   ↓ Supabase Client Configuration > Authentication Functions > signIn > should throw error if client not available
   ✓ Supabase Client Configuration > Authentication Functions > signUp > should sign up new user with metadata 0ms
   ✓ Supabase Client Configuration > Authentication Functions > signOut > should sign out current user 0ms
   ✓ Supabase Client Configuration > Authentication Functions > getUser > should return current user 0ms
   ✓ Supabase Client Configuration > Authentication Functions > getSession > should return current session 0ms
   ✓ Supabase Client Configuration > Authentication Functions > onAuthStateChange > should register auth state change listener 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > getUserRole > should fetch user role from database 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > getUserRole > should return null on database error (FAIL-CLOSED) 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > getUserRole > should return null if no role in data (FAIL-CLOSED) 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > getUserRole > should return null if invalid role detected (FAIL-CLOSED) 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > getUserRole > should return null if client not available (FAIL-CLOSED) 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > Role Constants > should define all 5 user roles 0ms
   ✓ Supabase Client Configuration > User Role Management - FAIL-CLOSED SECURITY > Role Constants > should export UserRole type 0ms
stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
Document concurrent-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 1.92ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 2.25ms

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Performance Requirements > should handle large queue operations efficiently
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 2.45ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 2.61ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 2.74ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 2.95ms

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 3.17ms

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 3.42ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 3.55ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should support concurrent users without degradation
CustomSupabaseProvider connected in 3.62ms

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should provide basic document state access
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should provide basic document state access
Document state-test does not exist, will be created on first update

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should provide basic document state access
CustomSupabaseProvider connected in 0.18ms

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider.test.ts > CustomSupabaseProvider Integration > should provide basic document state access
Awareness updated

 ✓ tests/unit/collaboration/custom-supabase-provider.test.ts (4 tests) 65ms
stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Performance Requirements > should not block main thread during operations
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Browser Compatibility > should handle private browsing mode gracefully
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB open failed: undefined
    at Object.request.onerror [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:144:16[90m)[39m
    at Timeout._onTimeout [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:391:21[90m)[39m
[90m    at listOnTimeout (node:internal/timers:588:17)[39m
[90m    at processTimers (node:internal/timers:523:7)[39m

stderr | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Browser Compatibility > should work in environments without IndexedDB support
IndexedDB initialization failed, falling back to localStorage: Error: IndexedDB not supported
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:131:16
    at new Promise (<anonymous>)
    at IndexedDBQueue.initializeIndexedDB [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:128:12[90m)[39m
    at IndexedDBQueue.initialize [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/database/indexedDBQueue.ts:97:18[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/database/indexedDBQueue.test.ts:412:19
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should initialize with current schema version
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should initialize CustomSupabaseProvider with authenticated user context
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: test-document-456

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should handle schema version upgrades
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should detect schema version mismatches
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should provide schema migration information
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should maintain data integrity during schema upgrades
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should initialize CustomSupabaseProvider with authenticated user context
ScriptEditor: Cleaning up provider

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should fallback to anonymous mode when authentication fails
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: test-document-456

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should fallback to anonymous mode when authentication fails
ScriptEditor: Cleaning up provider

stdout | tests/unit/components/ScriptEditor.paste.test.tsx > ScriptEditor Multi-Paragraph Paste > should process multi-paragraph paste and create multiple components
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should pass project context to authenticated provider factory
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: specific-document-012

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should handle schema downgrade gracefully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Schema Versioning & Migration > should coordinate with ClientLifecycleManager schema versions
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ❯ tests/unit/database/indexedDBQueue.test.ts (26 tests | 4 failed | 2 skipped) 108ms
   ✓ IndexedDBQueue > IndexedDB Queue Operations > should initialize IndexedDB with correct schema 3ms
   ✓ IndexedDBQueue > IndexedDB Queue Operations > should enqueue operations to IndexedDB 1ms
   × IndexedDBQueue > IndexedDB Queue Operations > should dequeue operations in FIFO order 10ms
     → expected Uint8Array[ 1, 2, 3 ] to deeply equal Uint8Array[ 1, 2, 3 ]
   × IndexedDBQueue > IndexedDB Queue Operations > should peek at next operation without removing it 1ms
     → expected Uint8Array[ 7, 8, 9 ] to deeply equal Uint8Array[ 7, 8, 9 ]
   ✓ IndexedDBQueue > IndexedDB Queue Operations > should handle empty queue operations gracefully 1ms
   ✓ IndexedDBQueue > IndexedDB Queue Operations > should clear all operations from queue 1ms
   ↓ IndexedDBQueue > Persistence Across Sessions > should persist operations across page refreshes
   ↓ IndexedDBQueue > Persistence Across Sessions > should handle concurrent queue access safely
   ✓ IndexedDBQueue > Fallback Chain Implementation > should fallback to localStorage when IndexedDB unavailable 1ms
   ✓ IndexedDBQueue > Fallback Chain Implementation > should fallback to memory when both IndexedDB and localStorage fail 0ms
   × IndexedDBQueue > Fallback Chain Implementation > should migrate data from localStorage to IndexedDB 2ms
     → expected Uint8Array[ 99, 88, 77 ] to deeply equal Uint8Array[ 99, 88, 77 ]
   ✓ IndexedDBQueue > Fallback Chain Implementation > should handle migration of corrupted localStorage data gracefully 1ms
   ✓ IndexedDBQueue > Error Handling and Resilience > should handle IndexedDB quota exceeded gracefully 2ms
   ✓ IndexedDBQueue > Error Handling and Resilience > should handle database corruption gracefully 10ms
   × IndexedDBQueue > Error Handling and Resilience > should maintain atomicity during operations 3ms
     → expected [ Uint8Array[ 1, 1 ], …(2) ] to deeply equal [ Uint8Array[ 1, 1 ], …(2) ]
   ✓ IndexedDBQueue > Performance Requirements > should handle large queue operations efficiently 24ms
   ✓ IndexedDBQueue > Performance Requirements > should not block main thread during operations 11ms
   ✓ IndexedDBQueue > Browser Compatibility > should handle private browsing mode gracefully 2ms
   ✓ IndexedDBQueue > Browser Compatibility > should work in environments without IndexedDB support 1ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should initialize with current schema version 4ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should handle schema version upgrades 4ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should detect schema version mismatches 1ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should provide schema migration information 3ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should maintain data integrity during schema upgrades 9ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should handle schema downgrade gracefully 1ms
   ✓ IndexedDBQueue > Schema Versioning & Migration > should coordinate with ClientLifecycleManager schema versions 1ms
stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Authentication Context Flow > should pass project context to authenticated provider factory
ScriptEditor: Cleaning up provider

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Provider Integration Contracts > should connect provider after initialization with authentication context
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: test-document-456

stdout | tests/unit/components/ScriptEditor.paste.test.tsx > ScriptEditor Multi-Paragraph Paste > should respect the 18 component limit when pasting multiple paragraphs
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Provider Integration Contracts > should connect provider after initialization with authentication context
ScriptEditor: Cleaning up provider

stdout | tests/unit/components/ScriptEditor.paste.test.tsx > ScriptEditor Multi-Paragraph Paste > should handle single paragraph paste normally (no component creation)
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.paste.test.tsx > ScriptEditor Multi-Paragraph Paste > should handle empty paste content gracefully
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.paste.test.tsx > ScriptEditor Multi-Paragraph Paste > should handle paste when onComponentAdd is not provided
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Provider Integration Contracts > should display connection status based on provider state
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: test-document-456

stderr | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Provider Integration Contracts > should display connection status based on provider state
An update to ScriptEditor inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Provider Integration Contracts > should display connection status based on provider state
ScriptEditor: Cleaning up provider

stdout | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Error Handling Integration > should handle provider initialization failure with auth context
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Starting provider initialization
ScriptEditor: Initializing provider for document: test-document-456

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Initialization > should render ScriptEditor component successfully
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

 ✓ tests/unit/components/ScriptEditor.paste.test.tsx (5 tests) 46ms
stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Initialization > should render TipTap editor with basic rich text features
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Initialization > should initialize with Y.js document binding
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stderr | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Error Handling Integration > should handle provider initialization failure with auth context
AuthenticatedProviderFactory: Failed to create provider: Error: Provider initialization failed
    at fn.<anonymous> [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/components/editor/ScriptEditor.auth-integration.test.tsx:211:15[90m)[39m
    at new mockCall [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at new CustomSupabaseProvider [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4mtinyspy[24m/dist/index.js:47:39[90m)[39m
    at Function.create [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/collaboration/AuthenticatedProviderFactory.ts:64:24[90m)[39m
    at initializeProvider [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/components/editor/ScriptEditor.tsx:349:39[90m)[39m

stderr | src/components/editor/ScriptEditor.auth-integration.test.tsx > ScriptEditor Authentication Integration > Error Handling Integration > should handle provider initialization failure with auth context
ScriptEditor: Failed to initialize collaboration provider: Error: Failed to create authenticated provider: Provider initialization failed
    at Function.create [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/collaboration/AuthenticatedProviderFactory.ts:86:13[90m)[39m
    at initializeProvider [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/components/editor/ScriptEditor.tsx:349:39[90m)[39m

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Rich Text Features > should support bold text formatting
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Rich Text Features > should support italic text formatting
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Rich Text Features > should support bulleted lists
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Rich Text Features > should support heading levels
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Y.js Collaboration Integration > should bind to Y.js document for collaborative editing
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Y.js Collaboration Integration > should sync local changes to Y.js document
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Y.js Collaboration Integration > should display collaboration cursor from remote users
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Content Persistence > should auto-save content to Supabase via Y.js
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Content Persistence > should handle optimistic locking conflicts
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Content Persistence > should persist TipTap JSON to JSONB storage
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

 ✓ src/components/editor/ScriptEditor.auth-integration.test.tsx (6 tests) 107ms
stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Structure Management > should support 3-18 components per script
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Structure Management > should allow reordering components with drag and drop
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Structure Management > should display component status correctly
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Connection Status > should display connection status to collaboration server
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Connection Status > should show sync status with other users
ScriptEditor: useEffect mount - provider exists: [33mtrue[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - provider exists or already initializing

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Connection Status > should display active user presence indicators
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should create a new component when Add Component button is clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should create a new component when Add Component button is clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Performance Requirements > should handle 10-20 concurrent users smoothly
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Performance Requirements > should maintain <200ms comment sync latency
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Performance Requirements > should update presence indicators <500ms
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

 ❯ tests/unit/components/ScriptEditor.test.tsx (22 tests | 2 failed) 146ms
   ✓ ScriptEditor > Component Initialization > should render ScriptEditor component successfully 25ms
   ✓ ScriptEditor > Component Initialization > should render TipTap editor with basic rich text features 3ms
   ✓ ScriptEditor > Component Initialization > should initialize with Y.js document binding 14ms
   ✓ ScriptEditor > Rich Text Features > should support bold text formatting 2ms
   ✓ ScriptEditor > Rich Text Features > should support italic text formatting 2ms
   ✓ ScriptEditor > Rich Text Features > should support bulleted lists 1ms
   ✓ ScriptEditor > Rich Text Features > should support heading levels 1ms
   ✓ ScriptEditor > Y.js Collaboration Integration > should bind to Y.js document for collaborative editing 9ms
   ✓ ScriptEditor > Y.js Collaboration Integration > should sync local changes to Y.js document 4ms
   ✓ ScriptEditor > Y.js Collaboration Integration > should display collaboration cursor from remote users 2ms
   ✓ ScriptEditor > Content Persistence > should auto-save content to Supabase via Y.js 1ms
   ✓ ScriptEditor > Content Persistence > should handle optimistic locking conflicts 1ms
   ✓ ScriptEditor > Content Persistence > should persist TipTap JSON to JSONB storage 1ms
   × ScriptEditor > Component Structure Management > should support 3-18 components per script 14ms
     → Unable to find an element by: [data-testid="/component-item-/"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-gray-100 text-gray-400 cursor-not-allowed"[39m
          [33mdisabled[39m=[32m""[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
        [36m>[39m
          [0m5[0m
          [0m of 18 components[0m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"component-list border-b bg-white"[39m
        [33mdata-testid[39m=[32m"component-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-2 text-sm font-medium text-gray-700 bg-gray-100"[39m
        [36m>[39m
          [0mScript Components[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-0"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-0"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m1[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 0 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-0"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-0"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-1"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-1"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 1 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-2"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m3[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 2 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-2"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-2"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-3"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-3"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m4[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 3 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-3"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-3"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-4"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m5[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 4 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-4"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-4"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ ScriptEditor > Component Structure Management > should allow reordering components with drag and drop 6ms
   × ScriptEditor > Component Structure Management > should display component status correctly 3ms
     → Unable to find an element by: [data-testid="component-status-comp-1"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-gray-100 text-gray-400 cursor-not-allowed"[39m
          [33mdisabled[39m=[32m""[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
        [36m>[39m
          [0m1[0m
          [0m of 18 components[0m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"component-list border-b bg-white"[39m
        [33mdata-testid[39m=[32m"component-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-2 text-sm font-medium text-gray-700 bg-gray-100"[39m
        [36m>[39m
          [0mScript Components[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-1"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-1"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m1[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 1[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ ScriptEditor > Connection Status > should display connection status to collaboration server 3ms
   ✓ ScriptEditor > Connection Status > should show sync status with other users 1ms
   ✓ ScriptEditor > Connection Status > should display active user presence indicators 17ms
   ✓ ScriptEditor > Performance Requirements > should handle 10-20 concurrent users smoothly 4ms
   ✓ ScriptEditor > Performance Requirements > should maintain <200ms comment sync latency 1ms
   ✓ ScriptEditor > Performance Requirements > should update presence indicators <500ms 27ms
stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should display a list of existing components
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should allow editing a component when clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays project code and title correctly
An update to AppContent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays client information when available
An update to AppContent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays project phase badge when available
Failed to load scripts: Error: Failed to fetch scripts: TypeError: res.text is not a function
    at loadScripts [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/App.tsx:96:17[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays project phase badge when available
An update to AppContent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header
Failed to load scripts: Error: Failed to fetch scripts: TypeError: res.text is not a function
    at loadScripts [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/App.tsx:96:17[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays script editor version info
An update to AppContent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | tests/unit/components/ProjectHeader.test.tsx > Project Header > displays script editor version info
Failed to load scripts: Error: Failed to fetch scripts: TypeError: res.text is not a function
    at loadScripts [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/App.tsx:96:17[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

stderr | tests/unit/components/ProjectHeader.test.tsx
Failed to load scripts: Error: Failed to fetch scripts: TypeError: res.text is not a function
    at loadScripts [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/App.tsx:96:17[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

 ❯ tests/unit/components/ProjectHeader.test.tsx (4 tests | 4 failed) 40ms
   × Project Header > displays project code and title correctly 26ms
     → Unable to find an element with the text: EAV023. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × Project Header > displays client information when available 4ms
     → Unable to find an element with the text: Client: Berkeley Construction. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × Project Header > displays project phase badge when available 3ms
     → Unable to find an element with the text: Production. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × Project Header > displays script editor version info 2ms
     → Unable to find an element with the text: Script Editor v2.1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should delete a component when delete button is clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should support drag-and-drop reordering of components
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Creation > should limit components to 18 maximum
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.controlled.test.tsx > Script Component Management - Controlled Component > Component Performance Requirements > should auto-save component changes within 1 second
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

stdout | tests/unit/database/indexedDBQueue.simple.test.ts > IndexedDBQueue - Simple Tests > should initialize successfully
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ✓ tests/unit/resilience/retryWithBackoff.test.ts (17 tests) 8ms
stdout | tests/unit/database/indexedDBQueue.simple.test.ts > IndexedDBQueue - Simple Tests > should handle basic enqueue operation
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ✓ tests/unit/resilience/circuitBreaker.test.ts (22 tests) 8ms
stdout | tests/unit/database/indexedDBQueue.simple.test.ts > IndexedDBQueue - Simple Tests > should handle basic size operation
Running schema migrations from version 0 to 1
Applying schema migration for version 1

 ✓ tests/unit/database/indexedDBQueue.simple.test.ts (3 tests) 8ms
stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Running schema migrations from version 0 to 1
Applying schema migration for version 1

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/custom-supabase-provider-awareness.test.ts
Offline queue initialized with indexeddb storage

 ✓ tests/unit/collaboration/custom-supabase-provider-awareness.test.ts (8 tests) 4ms
stdout | CustomSupabaseProvider.initializeOfflineQueue (/Volumes/HestAI-Projects/eav-orchestrator/build/src/lib/collaboration/custom-supabase-provider.ts:516:15)
Offline queue initialized with indexeddb storage

 ✓ tests/unit/collaboration/encoding.test.ts (17 tests) 4ms
stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 ✓ tests/unit/collaboration/persistence.test.ts (13 tests) 6ms
 ✓ tests/config.test.ts (12 tests) 3ms
 ✓ tests/unit/types/editor.test.ts (16 tests) 3ms
stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 ✓ tests/unit/types/scriptComponent.test.ts (13 tests) 3ms
 ✓ tests/unit/api/version.test.ts (5 tests) 3ms
 ✓ tests/unit/types/ui/scriptComponent.test.ts (6 tests) 2ms
 ✓ tests/unit/collaboration/YjsSupabaseProvider.test.ts (12 tests) 726ms
stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures
Error persisting update after retries: Error: Network error
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:74:57
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should queue updates when circuit is open
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should queue updates when circuit is open
Document test-doc does not exist, will be created on first update

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should queue updates when circuit is open
CustomSupabaseProvider connected in 0.82ms

stderr | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should queue updates when circuit is open
Circuit breaker blocked or failed persist operation: Error: Breaker is open
    at buildError [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4mopossum[24m/lib/circuit.js:699:17[90m)[39m
    at CircuitBreaker.call [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4mopossum[24m/lib/circuit.js:486:21[90m)[39m
    at CircuitBreaker.fire [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4mopossum[24m/lib/circuit.js:415:22[90m)[39m
    at CustomSupabaseProvider.persistUpdate [90m(/Volumes/HestAI-Projects/eav-orchestrator/build/[39msrc/lib/collaboration/custom-supabase-provider.ts:288:39[90m)[39m
    at [90m/Volumes/HestAI-Projects/eav-orchestrator/build/[39mtests/unit/collaboration/circuitBreaker.test.ts:128:24
    at [90mfile:///Volumes/HestAI-Projects/eav-orchestrator/build/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20 {
  code: [32m'EOPENBREAKER'[39m,
  [[32mSymbol(our-error)[39m]: [33mtrue[39m
}

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should drain offline queue when circuit closes
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should drain offline queue when circuit closes
Document test-doc does not exist, will be created on first update

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should drain offline queue when circuit closes
Draining 1 queued operations

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should drain offline queue when circuit closes
CustomSupabaseProvider connected in 1.93ms

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Circuit Breaker State Management > should drain offline queue when circuit closes
Draining 2 queued operations

stdout | tests/unit/collaboration/circuitBreaker.test.ts > Circuit Breaker Integration > Wrapped Operations > should wrap loadInitialState with circuit breaker
Document test-doc does not exist, will be created on first update

stdout | tests/unit/collaboration/circuitBreaker.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts
Offline queue initialized with indexeddb storage

stdout | tests/unit/collaboration/circuitBreaker.test.ts
Offline queue initialized with indexeddb storage

 ✓ tests/unit/collaboration/circuitBreaker.test.ts (9 tests) 701ms
   ✓ Circuit Breaker Integration > Circuit Breaker State Management > should open circuit after threshold failures  689ms
 ✓ tests/build-system.test.ts (8 tests) 2ms
 ✓ tests/unit/api/transformers.test.ts (4 tests) 2ms
 ✓ tests/unit/assets.test.ts (3 tests) 2ms
 ✓ tests/unit/transformers.test.ts (4 tests) 2ms
stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should display a list of existing components
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should allow editing a component when clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should delete a component when delete button is clicked
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should support drag-and-drop reordering of components
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should limit components to 18 maximum
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

stdout | tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Performance Requirements > should auto-save component changes within 1 second
ScriptEditor: useEffect mount - provider exists: [33mfalse[39m initializing: [33mfalse[39m
ScriptEditor: Skipping initialization - missing config

 ✓ tests/unit/components/ScriptComponentManagement.controlled.test.tsx (7 tests) 1333ms
   ✓ Script Component Management - Controlled Component > Component Performance Requirements > should auto-save component changes within 1 second  1007ms
 ❯ tests/unit/components/ScriptComponentManagement.test.tsx (7 tests | 1 failed) 2272ms
   × Script Component Management - V2 Requirements > Component Creation > should create a new component when Add Component button is clicked 1156ms
     → Unable to find an element by: [data-testid="component-comp-123"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m>[39m
          [0mMock Editor Content[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-blue-600 text-white hover:bg-blue-700"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"script-editor "[39m
        [33mdata-testid[39m=[32m"script-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
          [33mdata-testid[39m=[32m"editor-toolbar"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"bold-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mB[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"italic-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mI[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"bullet-list-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0m•[0m
          [36m</button>[39m
          [36m<select[39m
            [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
            [33mdata-testid[39m=[32m"heading-select"[39m
          [36m>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"0"[39m
            [36m>[39m
              [0mParagraph[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"1"[39m
            [36m>[39m
              [0mHeading 1[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"2"[39m
            [36m>[39m
              [0mHeading 2[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"3"[39m
            [36m>[39m
              [0mHeading 3[0m
            [36m</option>[39m
          [36m</select>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
          [33mdata-testid[39m=[32m"collaboration-status"[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"status-indicator disconnected"[39m
            [33mdata-testid[39m=[32m"connection-status"[39m
          [36m>[39m
            [0m🔴 Disconnected[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
        [36m>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"editor-content"[39m
          [36m>[39m
            [0mMock Editor Content[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
            [33mdata-testid[39m=[32m"collaboration-cursors"[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Add Component"[39m
            [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-blue-600 text-white hover:bg-blue-700"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0m+ Add Component[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"conflict-resolver hidden"[39m
          [33mdata-testid[39m=[32m"conflict-resolver"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"content-processor hidden"[39m
          [33mdata-testid[39m=[32m"content-processor"[39m
        [36m/>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
   ✓ Script Component Management - V2 Requirements > Component Creation > should display a list of existing components 7ms
   ✓ Script Component Management - V2 Requirements > Component Creation > should allow editing a component when clicked 8ms
   ✓ Script Component Management - V2 Requirements > Component Creation > should delete a component when delete button is clicked 25ms
   ✓ Script Component Management - V2 Requirements > Component Creation > should support drag-and-drop reordering of components 6ms
   ✓ Script Component Management - V2 Requirements > Component Creation > should limit components to 18 maximum 44ms
   ✓ Script Component Management - V2 Requirements > Component Performance Requirements > should auto-save component changes within 1 second  1025ms

⎯⎯⎯⎯⎯⎯ Failed Tests 13 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/lib/supabase.test.ts > Supabase Client Configuration > Client Initialization > should create Supabase client with correct configuration from environment variables
AssertionError: expected "spy" to be called with arguments: [ 'https://test.supabase.co', …(2) ][90m

Received: 

[1m  1st spy call:

[22m[2m  [[22m
[2m    "https://test.supabase.co",[22m
[32m-   "test-anon-key-for-integration-tests",[90m
[32m-   ObjectContaining {[90m
[32m-     "auth": ObjectContaining {[90m
[31m+   "test-publishable-key-for-integration-tests",[90m
[31m+   {[90m
[31m+     "auth": {[90m
[2m        "autoRefreshToken": true,[22m
[2m        "detectSessionInUrl": true,[22m
[2m        "persistSession": true,[22m
[2m        "storageKey": "eav-orchestrator-auth",[22m
[2m      },[22m
[32m-     "realtime": ObjectContaining {[90m
[32m-       "params": ObjectContaining {[90m
[31m+     "realtime": {[90m
[31m+       "params": {[90m
[2m          "eventsPerSecond": 10,[22m
[2m        },[22m
[2m      },[22m
[2m    },[22m
[2m  ][22m
[39m[90m

Number of calls: [1m1[22m
[39m
 ❯ src/lib/supabase.test.ts:60:28
     58| 
     59|       // Assert using the actual environment variables provided by vit…
     60|       expect(createClient).toHaveBeenCalledWith(
       |                            ^
     61|         import.meta.env.VITE_SUPABASE_URL,
     62|         import.meta.env.VITE_SUPABASE_ANON_KEY,

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/13]⎯

 FAIL  tests/unit/components/ProjectHeader.test.tsx > Project Header > displays project code and title correctly
TestingLibraryElementError: Unable to find an element with the text: EAV023. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ tests/unit/components/ProjectHeader.test.tsx:12:19
     10| 
     11|     // Check if project code is displayed
     12|     expect(screen.getByText('EAV023')).toBeInTheDocument();
       |                   ^
     13| 
     14|     // Check if project title is displayed

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/13]⎯

 FAIL  tests/unit/components/ProjectHeader.test.tsx > Project Header > displays client information when available
TestingLibraryElementError: Unable to find an element with the text: Client: Berkeley Construction. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ tests/unit/components/ProjectHeader.test.tsx:22:19
     20| 
     21|     // Check if client name is displayed
     22|     expect(screen.getByText('Client: Berkeley Construction')).toBeInTh…
       |                   ^
     23|   });
     24| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/13]⎯

 FAIL  tests/unit/components/ProjectHeader.test.tsx > Project Header > displays project phase badge when available
TestingLibraryElementError: Unable to find an element with the text: Production. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ tests/unit/components/ProjectHeader.test.tsx:29:19
     27| 
     28|     // Check if project phase is displayed
     29|     expect(screen.getByText('Production')).toBeInTheDocument();
       |                   ^
     30|   });
     31| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/13]⎯

 FAIL  tests/unit/components/ProjectHeader.test.tsx > Project Header > displays script editor version info
TestingLibraryElementError: Unable to find an element with the text: Script Editor v2.1. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-gray-50"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"text-center"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"[39m
        [36m/>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-gray-600"[39m
        [36m>[39m
          [0mLoading EAV Orchestrator...[0m
        [36m</p>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ tests/unit/components/ProjectHeader.test.tsx:36:19
     34| 
     35|     // Check if version info is displayed
     36|     expect(screen.getByText('Script Editor v2.1')).toBeInTheDocument();
       |                   ^
     37|     expect(screen.getByText('Real-time Collaboration')).toBeInTheDocum…
     38|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/13]⎯

 FAIL  tests/unit/components/ScriptComponentManagement.test.tsx > Script Component Management - V2 Requirements > Component Creation > should create a new component when Add Component button is clicked
TestingLibraryElementError: Unable to find an element by: [data-testid="component-comp-123"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m>[39m
          [0mMock Editor Content[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-blue-600 text-white hover:bg-blue-700"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"script-editor "[39m
        [33mdata-testid[39m=[32m"script-editor"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
          [33mdata-testid[39m=[32m"editor-toolbar"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"bold-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mB[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"italic-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mI[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
            [33mdata-testid[39m=[32m"bullet-list-button"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0m•[0m
          [36m</button>[39m
          [36m<select[39m
            [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
            [33mdata-testid[39m=[32m"heading-select"[39m
          [36m>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"0"[39m
            [36m>[39m
              [0mParagraph[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"1"[39m
            [36m>[39m
              [0mHeading 1[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"2"[39m
            [36m>[39m
              [0mHeading 2[0m
            [36m</option>[39m
            [36m<option[39m
              [33mvalue[39m=[32m"3"[39m
            [36m>[39m
              [0mHeading 3[0m
            [36m</option>[39m
          [36m</select>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
          [33mdata-testid[39m=[32m"collaboration-status"[39m
        [36m>[39m
          [36m<span[39m
            [33mclass[39m=[32m"status-indicator disconnected"[39m
            [33mdata-testid[39m=[32m"connection-status"[39m
          [36m>[39m
            [0m🔴 Disconnected[0m
          [36m</span>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
        [36m>[39m
          [36m<div[39m
            [33mdata-testid[39m=[32m"editor-content"[39m
          [36m>[39m
            [0mMock Editor Content[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
            [33mdata-testid[39m=[32m"collaboration-cursors"[39m
          [36m/>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
        [36m>[39m
          [36m<button[39m
            [33maria-label[39m=[32m"Add Component"[39m
            [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-blue-600 text-white hover:bg-blue-700"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0m+ Add Component[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"conflict-resolver hidden"[39m
          [33mdata-testid[39m=[32m"conflict-resolver"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"content-processor hidden"[39m
          [33mdata-testid[39m=[32m"content-processor"[39m
        [36m/>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 ❯ waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 ❯ tests/unit/components/ScriptComponentManagement.test.tsx:59:13
     57| 
     58|       // Verify component appears in list
     59|       await waitFor(() => {
       |             ^
     60|         expect(screen.getByTestId('component-comp-123')).toBeInTheDocu…
     61|       });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/13]⎯

 FAIL  tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Structure Management > should support 3-18 components per script
TestingLibraryElementError: Unable to find an element by: [data-testid="/component-item-/"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-gray-100 text-gray-400 cursor-not-allowed"[39m
          [33mdisabled[39m=[32m""[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
        [36m>[39m
          [0m5[0m
          [0m of 18 components[0m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"component-list border-b bg-white"[39m
        [33mdata-testid[39m=[32m"component-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-2 text-sm font-medium text-gray-700 bg-gray-100"[39m
        [36m>[39m
          [0mScript Components[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-0"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-0"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m1[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 0 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-0"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-0"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-1"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-1"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m2[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 1 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-2"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m3[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 2 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-2"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-2"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-3"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-3"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m4[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 3 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-3"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-3"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-4"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-4"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m5[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 4 content[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-4"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-4"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:109:15
 ❯ tests/unit/components/ScriptEditor.test.tsx:223:21
    221|       // Component list should be rendered
    222|       expect(screen.getByTestId('component-list')).toBeInTheDocument();
    223|       expect(screen.getAllByTestId(/component-item-/)).toHaveLength(5);
       |                     ^
    224|     });
    225|     it('should allow reordering components with drag and drop', async …

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/13]⎯

 FAIL  tests/unit/components/ScriptEditor.test.tsx > ScriptEditor > Component Structure Management > should display component status correctly
TestingLibraryElementError: Unable to find an element by: [data-testid="component-status-comp-1"]

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"script-editor "[39m
      [33mdata-testid[39m=[32m"script-editor"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"toolbar border-b border-gray-200 p-2 flex items-center gap-1"[39m
        [33mdata-testid[39m=[32m"editor-toolbar"[39m
      [36m>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm font-bold bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bold-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mB[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm italic bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"italic-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0mI[0m
        [36m</button>[39m
        [36m<button[39m
          [33mclass[39m=[32m"px-3 py-1 mr-2 rounded text-sm bg-gray-100 hover:bg-gray-200"[39m
          [33mdata-testid[39m=[32m"bullet-list-button"[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m•[0m
        [36m</button>[39m
        [36m<select[39m
          [33mclass[39m=[32m"px-2 py-1 border rounded text-sm"[39m
          [33mdata-testid[39m=[32m"heading-select"[39m
        [36m>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"0"[39m
          [36m>[39m
            [0mParagraph[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"1"[39m
          [36m>[39m
            [0mHeading 1[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"2"[39m
          [36m>[39m
            [0mHeading 2[0m
          [36m</option>[39m
          [36m<option[39m
            [33mvalue[39m=[32m"3"[39m
          [36m>[39m
            [0mHeading 3[0m
          [36m</option>[39m
        [36m</select>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"collaboration-status p-2 bg-gray-50 text-sm"[39m
        [33mdata-testid[39m=[32m"collaboration-status"[39m
      [36m>[39m
        [36m<span[39m
          [33mclass[39m=[32m"status-indicator disconnected"[39m
          [33mdata-testid[39m=[32m"connection-status"[39m
        [36m>[39m
          [0m🔴 Disconnected[0m
        [36m</span>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"editor-wrapper relative border-b"[39m
      [36m>[39m
        [36m<div[39m
          [33mdata-testid[39m=[32m"editor-content"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"collaboration-cursors absolute inset-0 pointer-events-none"[39m
          [33mdata-testid[39m=[32m"collaboration-cursors"[39m
        [36m/>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"add-component-section border-b p-3 bg-gray-50"[39m
      [36m>[39m
        [36m<button[39m
          [33maria-label[39m=[32m"Add Component"[39m
          [33mclass[39m=[32m"px-4 py-2 rounded text-sm font-medium bg-gray-100 text-gray-400 cursor-not-allowed"[39m
          [33mdisabled[39m=[32m""[39m
          [33mtype[39m=[32m"button"[39m
        [36m>[39m
          [0m+ Add Component[0m
        [36m</button>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
        [36m>[39m
          [0m1[0m
          [0m of 18 components[0m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"component-list border-b bg-white"[39m
        [33mdata-testid[39m=[32m"component-list"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"p-2 text-sm font-medium text-gray-700 bg-gray-100"[39m
        [36m>[39m
          [0mScript Components[0m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"component-item flex items-center p-3 border-b last:border-b-0 cursor-pointer hover:bg-gray-50"[39m
          [33mdata-testid[39m=[32m"component-comp-1"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"drag-handle mr-3 cursor-move text-gray-400 hover:text-gray-600"[39m
            [33mdata-testid[39m=[32m"drag-handle-comp-1"[39m
            [33mdraggable[39m=[32m"true"[39m
          [36m>[39m
            [0m⋮⋮[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex-1"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-sm font-medium text-gray-700"[39m
            [36m>[39m
              [0mComponent [0m
              [0m1[0m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-xs text-gray-500 mt-1"[39m
            [36m>[39m
              [0mComponent 1[0m
              [0m...[0m
            [36m</div>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"edit-btn ml-2 px-3 py-1 text-blue-600 hover:bg-blue-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"edit-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mEdit[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"delete-btn ml-2 px-3 py-1 text-red-600 hover:bg-red-50 rounded text-xs"[39m
            [33mdata-testid[39m=[32m"delete-component-comp-1"[39m
            [33mtype[39m=[32m"button"[39m
          [36m>[39m
            [0mDelete[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"conflict-resolver hidden"[39m
        [33mdata-testid[39m=[32m"conflict-resolver"[39m
      [36m/>[39m
      [36m<div[39m
        [33mclass[39m=[32m"content-processor hidden"[39m
        [33mdata-testid[39m=[32m"content-processor"[39m
      [36m/>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ tests/unit/components/ScriptEditor.test.tsx:284:21
    282| 
    283|       // Component status should be displayed
    284|       expect(screen.getByTestId('component-status-comp-1')).toBeInTheD…
       |                     ^
    285|     });
    286|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/13]⎯

 FAIL  tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should dequeue operations in FIFO order
AssertionError: expected Uint8Array[ 1, 2, 3 ] to deeply equal Uint8Array[ 1, 2, 3 ]

[2mCompared values have no visual difference.[22m

 ❯ tests/unit/database/indexedDBQueue.test.ts:81:25
     79|       const dequeued2 = await queue.dequeue();
     80| 
     81|       expect(dequeued1).toEqual(op1);
       |                         ^
     82|       expect(dequeued2).toEqual(op2);
     83|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/13]⎯

 FAIL  tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > IndexedDB Queue Operations > should peek at next operation without removing it
AssertionError: expected Uint8Array[ 7, 8, 9 ] to deeply equal Uint8Array[ 7, 8, 9 ]

[2mCompared values have no visual difference.[22m

 ❯ tests/unit/database/indexedDBQueue.test.ts:93:22
     91| 
     92|       const peeked = await queue.peek();
     93|       expect(peeked).toEqual(operation);
       |                      ^
     94| 
     95|       const size = await queue.size();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/13]⎯

 FAIL  tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Fallback Chain Implementation > should migrate data from localStorage to IndexedDB
AssertionError: expected Uint8Array[ 99, 88, 77 ] to deeply equal Uint8Array[ 99, 88, 77 ]

[2mCompared values have no visual difference.[22m

 ❯ tests/unit/database/indexedDBQueue.test.ts:219:24
    217| 
    218|       expect(size).toBe(1);
    219|       expect(migrated).toEqual(operation);
       |                        ^
    220| 
    221|       // localStorage should be cleared after migration

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/13]⎯

 FAIL  tests/unit/database/indexedDBQueue.test.ts > IndexedDBQueue > Error Handling and Resilience > should maintain atomicity during operations
AssertionError: expected [ Uint8Array[ 1, 1 ], …(2) ] to deeply equal [ Uint8Array[ 1, 1 ], …(2) ]

[2mCompared values have no visual difference.[22m

 ❯ tests/unit/database/indexedDBQueue.test.ts:331:23
    329|       }
    330| 
    331|       expect(results).toEqual(operations);
       |                       ^
    332|     });
    333|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/13]⎯

 FAIL  tests/unit/database/scriptComponentManager.test.ts > ScriptComponentManager > Error Handling > should validate input parameters
TypeError: Cannot read properties of null (reading '0')
 ❯ ScriptComponentManager.updateComponent src/lib/database/scriptComponentManager.ts:80:22
     78|       }
     79| 
     80|       const result = data[0] as DatabaseUpdateResponse;
       |                      ^
     81| 
     82|       if (!result.success) {
 ❯ tests/unit/database/scriptComponentManager.test.ts:317:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/13]⎯


 Test Files  6 failed | 24 passed (30)
      Tests  13 failed | 305 passed | 5 skipped (323)
   Start at  19:49:58
   Duration  3.26s (transform 936ms, setup 3.38s, collect 2.03s, tests 5.67s, environment 9.94s, prepare 1.67s)

